<!DOCTYPE html>
<html>
  <head>
    <title>Status</title>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.4.4.min.js"></script>
    <style>
      body{
        color: black;
        font-size: .8em;
        font-family: sans-serif;
      }
      h1,a{ color: blue}
      input{
        font-size: .8em;
        background-color: black;
        color:white;
      }
    </style>
  </head>
  <body>
    Hi there
    <p>
    Use Cases: <span id="use-cases"></span>
    Test Cases: <span id="test-cases"></span>
    Tests Passing: <span id="tests-passing"></span>
    Total: <span id="total"></span>
    </p>

  </body>
  <script id='script'>
    $.getJSON("https://spreadsheets.google.com/feeds/list/1Udy2fXDDuDAca6xIijNxxxZf0RjvlovmNO0azqnAl8o/od6/public/values?alt=json", function(data) {
      var entries = data.feed.entry;
      console.log(entries);

      // Pull totals
      var use_cases = entries[0]['gsx$count']['$t']
      $("#use-cases").text(use_cases);
      var test_cases = entries[1]['gsx$count']['$t']
      $("#test-cases").text(test_cases);
      var tests_passing = entries[2]['gsx$count']['$t']
      $("#tests-passing").text(tests_passing);
      var total = entries[3]['gsx$count']['$t']
      $("#total").text(total);

      use_case_count = {};
      test_case_count = {};
      test_pass_count = {};
      var i;
      for (i = 0; i < entries.length; i++) {
        console.log(entries[i]);
        use_case_date = entries[i]['gsx$usecasewritten:']['$t'];
        use_case_count[use_case_date] = use_case_count[use_case_date] ? use_case_count[use_case_date] + 1 : 1;
        test_case_date = entries[i]['gsx$testcasewritten:']['$t'];
        test_case_count[test_case_date] = test_case_count[test_case_date] ? test_case_count[test_case_date] + 1 : 1;
        test_pass_date = entries[i]['gsx$testcasepassing:']['$t'];
        test_pass_count[test_pass_date] = test_pass_count[test_pass_date] ? test_pass_count[test_pass_date] + 1 : 1;
      }
      for ( entry in entries ) {
        console.log(entry);
//        use_case_date = entry['gsx$usecasewritten:']['$t'];
//        use_case_count[use_case_date] = use_case_count[use_case_date] ? use_case_count[use_case_date] + 1 : 1;
//        test_case_date = entry['gsx$testcasewritten:']['$t'];
//        test_case_count[test_case_date] = test_case_count[test_case_date] ? test_case_count[test_case_date] + 1 : 1;
//        test_pass_date = entry['gsx$testcasepassing:']['$t'];
//        test_pass_count[test_pass_date] = test_pass_count[test_pass_date] ? test_pass_count[test_pass_date] + 1 : 1;
      }
      console.log({use_case_count});
      console.log({test_case_count});
      console.log({test_pass_count});
    });
  </script>
</html>
